/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template
 */
package mckennajamesproject1;

/**
 *
 * @author jamck
 */
import java.util.Scanner;

public class BookStore {

    public static void main(String[] args) {
        // creating a new instance of the inventory class so I can referece it here
        Inventory inventory = new Inventory();
        Membership membership = new Membership();
        
        System.out.println("WELCOME TO MY BOOK STORE");
        System.out.println("***************************************************");

        //import scanner
        Scanner scan = new Scanner(System.in);
        boolean leaveStore = false;
        boolean bookZero = false;
        boolean cdZero = false;
        boolean dvdZero = false;
        double totalMoney = 0.0;
        //while took to keep the program running while the user is in the store
        while (leaveStore == false) {

            System.out.println("Select From One Of The Following Options");
            System.out.println("\t 1. Make A Purchase");
            System.out.println("\t 2. MemberShip Status");
            System.out.println("\t 3. Inventory");
            System.out.println("\t 4. Exit");

            int userNum = scan.nextInt();
            // Condition for when the user enters a number that is not available
            while (userNum != 0 && (userNum < 1 || userNum > 4)) {
                System.out.println("Please enter a valid number between 1 and 4.");
                System.out.print("Enter the line number to order (1 - 4) or 0 to exit: ");
                userNum = scan.nextInt();
            }

            // total size of the inventory
            int totalSize = inventory.inventorySize();
            //switch case condition for user input

            switch (userNum) {
                case 1:
                    System.out.println("Select from the following of what you want to buy: ");
                    for (Book book : inventory.books) {
                        System.out.println(book.getNumber() + ". " + book.getTitle() + ": " + book.getQuantity() + " in stock" + " -- " + "$" + book.getPrice() + book.getType());
                    }

                    for (CD cd : inventory.CDs) {
                        System.out.println(cd.getNumber() + ". " + cd.getTitle() + ": " + cd.getQuantity() + " in stock" + " -- " + "$" + cd.getPrice() + cd.getType());
                    }

                    for (DVD dvd : inventory.DVDs) {
                        System.out.println(dvd.getNumber() + ". " + dvd.getTitle() + ": " + dvd.getQuantity() + " in stock" + " -- " + dvd.getPrice() + dvd.getType());
                    }

                    int orderBook = scan.nextInt();
                    while (orderBook != 0 && (orderBook < 1 || orderBook > totalSize)) {
                        System.out.println("Please enter a valid number between 1 and " + totalSize + ".");
                        System.out.print("Enter the line number to order (1-" + totalSize + ") or 0 to exit: ");
                        orderBook = scan.nextInt();
                    }

                    int selectedBookType = 0; // You can define constants for CD and DVD types

                    if (orderBook >= 1 && orderBook <= 3) {
                        selectedBookType = 1; 
                    } else if (orderBook >= 4 && orderBook <= 6) {
                        selectedBookType = 2; 
                    } else if (orderBook >= 7 && orderBook <= 8) {
                        selectedBookType = 3; 
                    }

                    switch (selectedBookType) {
                        case 1: // Book
                            if (bookZero == false) {
                                for (Book book : inventory.books) {
                                    if (book.getNumber() == orderBook && bookZero == false) {
                                        inventory.setNumItems(inventory.getNumItems() + 1);
                                        totalMoney = totalMoney + book.getPrice();
                                        int newQuan = book.getQuantity();
                                        newQuan = (book.getQuantity() - 1);
                                        book.setQuantity(newQuan);
                                        if (newQuan == 0) {
                                            bookZero = true;
                                        }
                                        break;
                                    }
                                }
                            } else {
                                System.out.println("Out of Stock!");

                            }
                            break;

                        case 2: // CD

                            if (cdZero == false) {
                                for (CD cd : inventory.CDs) {
                                    if (cd.getNumber() == orderBook && bookZero == false) {
                                        inventory.setNumItems(inventory.getNumItems() + 1);
                                        totalMoney = totalMoney + cd.getPrice();
                                        int newQuan = cd.getQuantity();
                                        newQuan = (cd.getQuantity() - 1);
                                        cd.setQuantity(newQuan);
                                        if (newQuan == 0) {
                                            cdZero = true;
                                        }
                                        break;
                                    }
                                }
                            } else {
                                System.out.println("Out of Stock!");

                            }

                            break;

                        case 3: // DVD
                            if (dvdZero == false) {
                                for (DVD dvd : inventory.DVDs) {
                                    if (dvd.getNumber() == orderBook && dvdZero == false) {
                                        inventory.setNumItems(inventory.getNumItems() + 1);
                                        totalMoney = totalMoney + dvd.getPrice();
                                        int newQuan = dvd.getQuantity();
                                        newQuan = (dvd.getQuantity() - 1);
                                        dvd.setQuantity(newQuan);
                                        if (newQuan == 0) {
                                            dvdZero = true;
                                        }
                                        break;
                                    }
                                }
                            } else {
                                System.out.println("Out of Stock!");

                            }
                            break;

                        default:
                            System.out.println("Invalid order number.");
                            break;
                    }

                    System.out.println("You have " + inventory.getNumItems() + " Items in your cart. Are you done shopping?");
                    System.out.println("1. Yes");
                    System.out.println("2. No");
                    int doneShopping = scan.nextInt();
                    if (doneShopping == 1) {
                        System.out.println("Please select which member is making this purchase");
                        System.out.println("1. James");
                        System.out.println("2. Ryan");
                        System.out.println("3. register a new member");
                        int memberPurchase = scan.nextInt();
                        while (memberPurchase != 0 && (memberPurchase < 1 || memberPurchase > 3)) {
                        System.out.println("Please enter a valid number between 1 and 2");
                        System.out.println("Enter the line number to order (1-2");
                        memberPurchase = scan.nextInt();
                    }
                        if(memberPurchase == 1){
                            System.out.println("Welcome back James, just a heads up, your monthly payment will be billed through your credit card in 13 days");
                            System.out.println("Because you are a premium member, enjoy your %10 discount!");
                            double discountTotal = (totalMoney) - (totalMoney * .10);
                            discountTotal = Math.round( discountTotal* 10.0) / 10.0;
                            System.out.println("Your total comes out to be " + "$" + discountTotal  + " dollars");
                            System.out.println("Thank you for shopping with us, see you again!");
                            System.exit(0);
                            
                        }
                        if(memberPurchase == 2){
                            System.out.println("Welcome back Ryan, just a heads up, your monthly payment will be billed through your debit card in 2 days");
                            System.out.println("Because you are a premium member, enjoy your %10 discount!");
                            double discountTotal = (totalMoney) - (totalMoney * .10);
                            discountTotal = Math.round( discountTotal* 10.0) / 10.0;
                            System.out.println("Your total comes out to be " + "$" + discountTotal  + " dollars");
                            System.out.println("Thank you for shopping with us, see you again!");
                            System.exit(0);
                            
                        }
                        
                        System.out.println("Lets get you registed as a new member");
                        System.out.println("Would you like to register as a regular member or Premium Member");
                        System.out.println("1. Regular Member ");
                        System.out.println("2. Premium Member ");
                        int regPrem = scan.nextInt();
                        while (regPrem != 0 && (regPrem < 1 || regPrem > 2)) {
                        System.out.println("Please enter a valid number between 1 and 2");
                        System.out.print("Enter the line number to order (1-2 or 0 to exit: ");
                        regPrem = scan.nextInt();
                    }
                        
                        if (regPrem == 1) {
                            System.out.println("Please enter your name");
                            scan.nextLine();
                            String name = scan.nextLine();
                            System.out.println("Alright, your all set " + name);
                            System.out.println("Your total comes out to be " + totalMoney + " Dollars ");
                            System.out.println("Thank you for shopping with us, have a nice day");
                            System.exit(0);
                            
                        }
                        if (regPrem == 2) {
                            System.out.println("Please enter your name");
                            scan.nextLine();
                            String name = scan.nextLine();
                            System.out.println("Please enter your prefered method of payment");
                            System.out.println("1. Debit");
                            System.out.println("2. Credit");
                            int payment = scan.nextInt(); 
                            if(payment == 1){
                                System.out.println("Thank you, you will be billed through your debit card in 30 days");
                            }
                            if(payment == 2){
                                System.out.println("Thank you, you will be billed through your credit card in 30 days");
                            }
                            double discountTotal = (totalMoney) - (totalMoney * .10);
                            discountTotal = Math.round( discountTotal* 10.0) / 10.0;
                            System.out.println("Because you are a premium member, you will receive a 10% discount on your total");
                            System.out.println("Your total comes out to be " + "$" + discountTotal  + " dollars");
                            System.out.println("Thank you for shopping with us, have a nice day");
                            System.exit(0);
           

                        }

                    }
                    if (doneShopping == 2) {
                        break;
                    }

                case 2:
                    break;
                case 3:
                    System.out.println("Here's what we have in store today! NEW RESTOCKS EVERY MONDAY");
                    System.out.println("***************************************************");
                    for (Book book : inventory.books) {
                        System.out.println(book.getNumber() + ". " + book.getTitle() + ": " + book.getQuantity() + " in stock" + " -- " + "$" + book.getPrice() + book.getType());
                    }

                    for (CD cd : inventory.CDs) {
                        System.out.println(cd.getNumber() + ". " + cd.getTitle() + ": " + cd.getQuantity() + " in stock" + " -- " + "$" + cd.getPrice() + cd.getType());
                    }

                    for (DVD dvd : inventory.DVDs) {
                        System.out.println(dvd.getNumber() + ". " + dvd.getTitle() + ": " + dvd.getQuantity() + " in stock" + " -- " + dvd.getPrice() + dvd.getType());
                    }
                    System.out.println("***************************************************");
                    break;
                case 4:
                    System.out.println("Thank you for shopping with us, have a nice day");
                    System.exit(0);

            }

        }

    }

}

